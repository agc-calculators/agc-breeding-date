/*! Built with http://stenciljs.com */
AgcBreedingDate.loadBundle("bg7dwkb8",["exports"],function(t){var e=window.AgcBreedingDate.h,a=function(t,e){"string"==typeof t&&(t=new Date(t));var a=new Date(t),i=t.getDate()+parseInt(e);return a.setDate(i),a},i=function(t,e){void 0===e&&(e="/");var a=new Date(t),i=a.getDate();return""+(a.getMonth()+1)+e+i+e+a.getFullYear()},n=function(t,e){var a=new Date(t),i=new Date(e);return Math.round((a.getTime()-i.getTime())/864e5)},s=function(){function t(){this.socket="",this.tract="",this.shadow=!1,this.mode="step",this.currentStep=0,this.cache={},this.submitted=!1,this.results={}}return t.prototype.render=function(){var t=this;return e("div",null,e("form",{onSubmit:function(t){return t.preventDefault()},ref:function(e){return t.form=e},"data-wizard":"agc-breeding-date","data-wizard-mode":this.mode,class:"agc-wizard"+(this.shadow?" shadow":"")},e("slot",null),e("section",{"data-wizard-section":"1"},e("div",{class:"agc-wizard__field"},e("label",{"data-i18n":"fields.calving-date"},"Calving Date"),e("input",{name:"calvingDate",type:"date",required:!0}),e("p",{class:"agc-wizard__validation-message","data-i18n":"validation.calving-date.required","data-validates":"calvingDate"},"Please enter a valid date."),e("p",{"data-i18n":"hints.calving-date"},"â®¤ Enter the calving date of the cow or heifer.")),"step"===this.mode&&e("div",{class:"agc-wizard__actions"},e("button",{class:"agc-wizard__actions-next","data-i18n":"actions.next",onClick:this.nextPrev.bind(this,1)},"Next ðŸ –"))),e("section",{"data-wizard-section":"2"},e("div",{class:"agc-wizard__field"},e("label",{"data-i18n":"fields.gestation-period"},"Gestation Period"),e("select",{name:"gestationPeriod"},e("option",{value:"279","data-i18n":"options.gestation-period.279"},"279 Days"),e("option",{value:"280","data-i18n":"options.gestation-period.280"},"280 Days"),e("option",{value:"281","data-i18n":"options.gestation-period.281"},"281 Days"),e("option",{value:"282","data-i18n":"options.gestation-period.282"},"282 Days"),e("option",{value:"283","data-i18n":"options.gestation-period.283",selected:!0},"283 Days"),e("option",{value:"284","data-i18n":"options.gestation-period.284"},"284 Days"),e("option",{value:"285","data-i18n":"options.gestation-period.285"},"285 Days"),e("option",{value:"286","data-i18n":"options.gestation-period.286"},"286 Days"),e("option",{value:"287","data-i18n":"options.gestation-period.287"},"287 Days")),e("p",null,"â®¤ Select the number of days in the gestation period.")),e("div",{class:"agc-wizard__actions"},"step"===this.mode&&e("button",{class:"agc-wizard__actions-back","data-i18n":"actions.back",onClick:this.nextPrev.bind(this,-1)},"ðŸ ” Back"),e("button",{class:"agc-wizard__actions-next","data-i18n":"actions.finish",onClick:this.nextPrev.bind(this,"step"===this.mode?1:2)},"Calculate ðŸ –"))),e("section",{"data-wizard-results":!0},e("slot",{name:"results"}))))},t.prototype.showTab=function(t){"step"===this.mode&&(this.cache.sections[t].style.display="block"),this.socket&&this.agcStepChanged.emit({socket:this.socket,tract:this.tract,step:this.currentStep})},t.prototype.reset=function(){this.currentStep=0,this.submitted=!1,this.showTab(0)},t.prototype.validateForm=function(){var t=!0;if(0===this.currentStep||"full"===this.mode){var e=this.form.querySelector('[name="calvingDate"]'),a=this.form.querySelector('[data-validates="calvingDate"');e.checkValidity()?(e.className=e.className.replace(" invalid",""),a.style.display="none"):(t=!1,-1===e.className.indexOf("invalid")&&(e.className+=" invalid"),a.style.display="block")}return t},t.prototype.nextPrev=function(t,e){if(e&&e.preventDefault(),"full"===this.mode){if(!this.validateForm())return!1}else if(1==t&&!this.validateForm())return!1;if("step"===this.mode&&(this.cache.sections[this.currentStep].style.display="none"),this.currentStep=this.currentStep+t,this.currentStep>=this.cache.sections.length)return this.submitted=!0,this.showResults.call(this),!1;this.showTab.call(this,this.currentStep)},t.prototype.showResults=function(){var t=this.form.querySelector('[name="calvingDate"').valueAsDate,e=parseInt(this.form.querySelector('[name="gestationPeriod"]').value),s=Math.floor(e/3),r=a(t,-e),o=n(r,new Date),d=n(t,new Date),c=n(new Date,r);o<0&&(o=0),c<0&&(c=0);var l=t<=new Date,u=c>0&&c<=e,p={id:"first",start:i(a(r,1),"/"),end:i(a(r,s),"/"),dayStart:1,dayEnd:s,isCurrent:c<=s},h={id:"second",start:i(a(r,s+1),"/"),end:i(a(r,2*s+1),"/"),dayStart:s+1,dayEnd:2*s,isCurrent:c>=s+1&&c<=2*s+1},g={id:"third",start:i(a(r,190),"/"),end:i(t,"/"),dayStart:2*s+1,dayEnd:e,isCurrent:c>=190},v=[p,h,g].filter(function(t){return t.isCurrent}),y={socket:this.socket,tract:this.tract,breedingDate:i(r,"/"),daysTillBreeding:o,gestationPeriod:e,calvingDate:i(t,"/"),daysTillCalving:d,daysBred:c,firstPartition:p,secondPartition:h,thirdPartition:g,currentPartition:v.length?v[0].id:"",calved:l,bred:u,inputs:{breedingDate:{text:"Breeding Date",i18n:"results.breeding-date",type:"date",value:i(r,"/")},gestationPeriod:{text:"Gestation Period",i18n:"results.gestation-period",type:"number",value:e}},outputs:{calvingDate:{text:"Calving Date",i18n:"results.calving-date",type:"date",value:i(t,"/")},daysTillCalving:{text:"Days until Calving",i18n:"results.days-until-calving",type:"number",value:d},daysBred:{text:"Days Bred",i18n:"results.days-bred",type:"number",value:c},firstPartition:{text:"First Partition",i18n:"results.first-partition",type:"object",value:p,fields:{start:{text:"Start",i18n:"results.start-date",type:"date",value:p.start},end:{text:"End",i18n:"results.end-date",type:"date",value:p.end}}},secondPartition:{text:"Second Partition",i18n:"results.second-partition",type:"object",value:h,fields:{start:{text:"Start",i18n:"results.start-date",type:"date",value:h.start},end:{text:"End",i18n:"results.end-date",type:"date",value:h.end}}},thirdPartition:{text:"Third Partition",i18n:"results.third-partition",type:"object",value:g,fields:{start:{text:"Start",i18n:"results.start-date",type:"date",value:g.start},end:{text:"End",i18n:"results.end-date",type:"date",value:p.end}}}}};this.socket&&this.agcCalculated.emit({socket:this.socket,tract:this.tract,results:Object.assign({},y)}),this.results=Object.assign({},y),this.cache.results.forEach(function(t){t.style.display="block"})},t.prototype.handleAction=function(t){"reset"===t.detail.action&&this.reset()},t.prototype.componentDidLoad=function(){var t,e,a=Array.from(this.form.querySelectorAll("[data-wizard-section]")).map(function(t){return t}).map(function(t){return t}),i=Array.from(this.form.querySelectorAll("[data-wizard-results]")).map(function(t){return t}).map(function(t){return t});this.cache=Object.assign({},this.cache,{sections:a,results:i}),window.document.addEventListener("agcAction",this.handleAction.bind(this)),this.form.querySelector('[name="calvingDate"]').defaultValue=(t=new Date,(e=new Date(t)).setMinutes(t.getMinutes()-t.getTimezoneOffset()),e.toJSON().slice(0,10)),this.showTab(0)},t.prototype.componentDidUnload=function(){window.document.removeEventListener("agcAction",this.handleAction)},Object.defineProperty(t,"is",{get:function(){return"agc-breeding-date"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{cache:{state:!0},currentStep:{state:!0},mode:{type:String,attr:"mode"},results:{state:!0},shadow:{type:Boolean,attr:"shadow"},socket:{type:String,attr:"socket"},submitted:{state:!0},tract:{type:String,attr:"tract"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"agcCalculated",method:"agcCalculated",bubbles:!0,cancelable:!0,composed:!0},{name:"agcStepChanged",method:"agcStepChanged",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"agc-breeding-date *{-webkit-box-sizing:border-box;box-sizing:border-box}agc-breeding-date form{width:var(--agc-form-width,100%);margin:var(--agc-form-margin,0 auto);border:var(--agc-form-border-size,0) var(--agc-form-border-style,solid) var(--agc-form-border-color,#ebebeb);border-radius:var(--agc-form-border-radius,0);padding:var(--agc-form-padding,0);background-color:var(--agc-form-bg-color,#fff);color:var(--agc-form-color,#333)}agc-breeding-date form.shadow{-webkit-box-shadow:var(--agc-form-box-shadow,0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23));-moz-box-shadow:var(--agc-form-box-shadow,0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23));box-shadow:var(--agc-form-box-shadow,0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23))}agc-breeding-date [data-wizard-mode=step] [data-wizard-results],agc-breeding-date [data-wizard-mode=step] [data-wizard-section]{display:none}agc-breeding-date .agc-wizard__field{padding:var(--agc-wizard-field-padding,10px)}agc-breeding-date label{text-transform:var(--agc-form-label-text-transform,none);display:var(--agc-form-label-display,block);width:var(--agc-form-label-width,100%);margin:var(--agc-form-label-margin,0 0 5px 0)}agc-breeding-date input[type=date],agc-breeding-date input[type=text],agc-breeding-date select{padding:var(--agc-form-input-padding,10px);width:var(--agc-form-input-width,100%);font-size:var(--agc-form-input-font-size,17px);font-family:var(--agc-form-input-font-family,Raleway);border:var(--agc-form-input-border-size,1px) var(--agc-form-input-border-style,solid) var(--agc-form-input-border-color,#aaa)}agc-breeding-date button{background-color:var(--agc-form-button-bg-color,#4caf50);color:var(--agc-form-button-color,#fff);border:var(--agc-form-button-border,none);padding:var(--agc-form-button-padding,10px 20px);margin:var(--agc-form-button-margin,0);font-size:var(--agc-form-button-font-size,17px);font-family:var(--agc-form-button-font-family,Raleway);cursor:var(--agc-form-button-cursor,pointer);text-transform:var(--agc-form-button-text-transform,inherit)}agc-breeding-date .agc-wizard__actions{background-color:var(--agc-wizard-actions-bg-color,transparent);border-radius:var(--agc-wizard-actions-border-radius,0);margin:var(--agc-wizard-actions-margin,10px 0 0);padding:var(--agc-wizard-actions-padding,0 10px 10px);zoom:1}agc-breeding-date .agc-wizard__actions:after,agc-breeding-date .agc-wizard__actions:before{content:\"\";display:table}agc-breeding-date .agc-wizard__actions:after{content:\"\";display:table;clear:both}agc-breeding-date .agc-wizard__actions.centered{text-align:var(--agc-form-actions-centered-text-align,center)}agc-breeding-date button.agc-wizard__actions-next{float:right}agc-breeding-date button.agc-wizard__actions-back{background-color:var(--agc-form-back-button-bg-color,#999);color:var(--agc-form-back-button-color,#fff)}agc-breeding-date button:hover{opacity:.8}agc-breeding-date .agc-wizard__validation-message{display:none;color:var(--agc-form-validation-message-color,maroon)}agc-breeding-date input.invalid{border-color:var(--agc-form-input-error-border-color,maroon);background-color:var(--agc-form-input-error-background-color,#ffe5e5);color:var(--agc-form-input-error-color,maroon)}"},enumerable:!0,configurable:!0}),t}();t.AgcBreedingDate=s,Object.defineProperty(t,"__esModule",{value:!0})});